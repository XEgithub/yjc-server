webpackJsonp([33],{"8v6D":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("VsUZ"),n={name:"Integral",data:function(){return{headerCon:"积分",totalIntegral:0,integralList:[],pageNo:0,pageSize:10,totalPages:"",noMore:0}},methods:{exchangeCoupon:function(t){var a=this;if(t.useable){var e={uuid:t.uuid};s.a.exchangeCoupon(e).then(function(t){200===t.data.code?(a.common.toast("兑换成功"),a.pageNo=0,a.pageSize=10,a.totalPages="",a.noMore=0,a.loadMore()):a.common.toast(t.data.msg)}).catch(function(t){a.common.toast(t)})}else this.common.toast("积分不足，无法兑换")},getIntegralList:function(){var t=this;this.loading=!0;var a={pageNo:this.pageNo,pageSize:this.pageSize};s.a.integral(a).then(function(a){if(200===a.data.code){t.totalIntegral=a.data.successObject.integral;var e=a.data.successObject.couponIPage.records;for(var s in e)e[s].needIntegral<=t.totalIntegral?e[s].useable=1:e[s].useable=0;t.integralList=t.integralList.concat(e),t.totalPages=a.data.successObject.couponIPage.pages,t.loading=!1}else t.common.toast(a.data.msg)}).catch(function(a){t.common.toast(a)})},loadMore:function(){this.loading=!0,this.pageNo++,1===this.pageNo?this.getIntegralList():this.pageNo>1&&this.totalPages>=this.pageNo?this.getIntegralList():this.noMore=1}},created:function(){this.loadMore()}},i={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"integral"},[s("div",{staticClass:"my_integral"},[s("p",[t._v("我的积分")]),t._v(" "),s("span",{staticClass:"integral_num"},[t._v(t._s(t.totalIntegral))]),t._v(" "),s("span",{staticClass:"extension_integral"},[t._v("推广/分享")]),t._v(" "),s("span",{staticClass:"earn_integral"},[t._v("赚积分")])]),t._v(" "),t.integralList.length?s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},[s("ul",t._l(t.integralList,function(a,e){return s("li",{key:e,class:a.useable?"":"disable"},[s("div",{staticClass:"money"},[s("p",{staticClass:"mh"},[s("span",{staticClass:"symbol"},[t._v("¥")]),t._v(" "),s("span",[t._v(t._s(a.couponPrice))])]),t._v(" "),s("p",{staticClass:"jfs"},[t._v(t._s(a.needIntegral)+"积分")])]),t._v(" "),s("div",{staticClass:"qm_yxq"},[s("p",{staticClass:"qm"},[t._v(t._s(a.name))]),t._v(" "),s("p",{staticClass:"yxq"},[t._v("有效期至"+t._s(a.expireTime))])]),t._v(" "),s("button",{staticClass:"exchange",on:{click:function(e){t.exchangeCoupon(a)}}},[t._v("兑换")]),t._v(" "),s("p",{staticClass:"describe"},[t._v("具体使用说明以购买页的活动规则为准")])])}),0)]):s("div",{staticClass:"no_message"},[s("img",{attrs:{src:e("AL6J")}}),t._v(" "),s("p",[t._v("暂无项目信息~")])]),t._v(" "),t.noMore?s("p",{staticClass:"noMore"},[t._v("没有更多数据了~")]):t._e()])},staticRenderFns:[]};var o=e("VU/8")(n,i,!1,function(t){e("YAzc")},"data-v-781ed9c5",null);a.default=o.exports},YAzc:function(t,a){}});