webpackJsonp([28],{l4b9:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("VsUZ"),n=s("d2gY"),i={name:"Appointment",data:function(){return{staticUrl:n.config.static_url,headerCon:"预约",commentList:[],pageNo:0,pageSize:10,totalPages:"",noMore:0,pShow:!0}},methods:{goComment:function(t){var e={orderId:t.order.uuid,orderNumber:t.order.orderNo,projectList:t.projectList,patient:t.comment.patient,nurse:{name:t.comment.nurse,phone:t.comment.nursePhone}};this.common.setStorage("orderInfo",e),this.$router.push("/comment")},getCommentList:function(){var t=this;this.loading=!0;var e={pageNo:this.pageNo,pageSize:this.pageSize};o.a.commentList(e).then(function(e){if(200===e.data.code){var s=e.data.successObject.records;for(var o in s)s[o].comment&&(s[o].comment.content?s[o].comment.content_copy=s[o].comment.content.split(","):s[o].comment.content_copy=[]);t.commentList=t.commentList.concat(s),console.log(t.commentList),t.totalPages=e.data.successObject.pages,t.loading=!1,t.commentList.length||(t.pShow=!1)}else t.common.toast(e.data.msg)}).catch(function(e){t.common.toast(e)})},loadMore:function(){this.loading=!0,this.pageNo++,1===this.pageNo?this.getCommentList():this.pageNo>1&&this.totalPages>=this.pageNo?this.getCommentList():this.noMore=1}},created:function(){this.loadMore()}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"my_comment"},[t.commentList.length?o("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},[o("ul",t._l(t.commentList,function(e){return o("li",{key:e.id},[o("div",{staticClass:"order_num common_item"},[o("label",[t._v("订单号：")]),t._v(" "),o("p",[t._v(t._s(e.order.orderNo))])]),t._v(" "),o("div",{staticClass:"visite_items common_item"},[o("label",[t._v("就诊项目：")]),t._v(" "),o("p",{staticClass:"visite_list"},t._l(e.projectList,function(e){return o("span",{key:e.uuid,staticClass:"project"},[t._v(t._s(e.name))])}),0)]),t._v(" "),o("div",{staticClass:"common_item"},[o("label",[t._v("服务护士：")]),t._v(" "),e.comment?o("p",[t._v(t._s(e.comment.nurse))]):t._e()]),t._v(" "),"4"===e.order.orderStatus?o("div",{staticClass:"common_item item_status"},[o("label",[t._v("状态：")]),t._v(" "),"4"===e.order.orderStatus?o("p",[t._v("待评价")]):t._e()]):t._e(),t._v(" "),"5"===e.order.orderStatus?o("div",{},[o("div",{staticClass:"common_item"},[o("label",[t._v("服务质量：")]),t._v(" "),o("p",{staticClass:"star_box"},t._l(5,function(t){return o("span",{key:t,class:{on:1*e.comment.grade>=t}})}),0)]),t._v(" "),o("div",{staticClass:"visite_items common_item"},[o("label",[t._v("评论留言：")]),t._v(" "),o("p",{staticClass:"visite_list"},t._l(e.comment.content_copy,function(s,n){return e.comment?o("span",{key:n,staticClass:"comment_des"},[t._v(t._s(s))]):t._e()}),0)]),t._v(" "),o("div",{staticClass:"visite_items common_item"},[o("label",[t._v("评论图片：")]),t._v(" "),o("p",{staticClass:"images_box"},t._l(e.comment.images,function(e,s){return o("img",{key:s,attrs:{src:t.staticUrl+e}})}),0)])]):t._e(),t._v(" "),"4"===e.order.orderStatus?o("div",{staticClass:"button_wrapper"},[o("button",{staticClass:"comment_btn",on:{click:function(s){t.goComment(e)}}},[t._v("去评论")])]):t._e()])}),0)]):o("div",{staticClass:"no_message"},[o("img",{attrs:{src:s("AL6J")}}),t._v(" "),o("p",[t._v("暂无评价信息~")])]),t._v(" "),t.noMore?o("p",{staticClass:"noMore"},[t._v("没有更多数据了~")]):t._e()])},staticRenderFns:[]};var c=s("VU/8")(i,a,!1,function(t){s("uFa/")},"data-v-d4c8765c",null);e.default=c.exports},"uFa/":function(t,e){}});