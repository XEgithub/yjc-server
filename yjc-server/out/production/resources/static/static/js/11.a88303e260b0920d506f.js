webpackJsonp([11],{"4UpT":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mvHQ"),a=s.n(i),q=s("VsUZ"),o=s("GgDs"),n=s("Au9i"),r={name:"PatientList",components:{Header:o.a,Toast:n.Toast,MessageBox:n.MessageBox},data:function(){return{isShowEmpty:!1,headerCon:"就医人",hospitalizedList:[],selectImg:s("ahnF"),notSelectImg:s("CHIo"),delImg:s("Ub/c"),editImg:s("AlFE"),pageNo:0,pageSize:6,loading:!0,totalPages:1}},methods:{addPatient:function(){sessionStorage.removeItem("upDatePatient"),this.$router.push("/addpatient")},setDefault:function(t){console.log(t),this.common.setStorage("patientInfo",t),console.log(this.hospitalizedList);for(var e=0;e<this.hospitalizedList.length;e++)this.hospitalizedList[e].settingDefault=!1;t.settingDefault=!0},getPatientList:function(){var t=this,e={pageNo:this.pageNo,pageSize:this.pageSize};q.a.getPatientList(e).then(function(e){if(200===e.data.code){var s=e.data.successObject;console.log(s),t.totalPages=s.pages,0===t.hospitalizedList.length&&0===s.records.length?t.isShowEmpty=!0:t.isShowEmpty=!1;for(var i=0;i<s.records.length;i++)s.records[i].settingDefault=!1,t.common.getStorage("patientInfo").uuid===s.records[i].uuid&&(s.records[i].settingDefault=!0);t.hospitalizedList=t.hospitalizedList.concat(s.records),t.loading=!1}}).catch(function(t){})},del:function(t){var e=this,s={uuid:t};Object(n.MessageBox)({title:"提示",message:"确定要删除该信息吗?",showCancelButton:!0}),n.MessageBox.confirm("确定要删除该信息吗?").then(function(t){q.a.delPatient(s).then(function(t){200===t.data.code?(Object(n.Toast)({message:"删除成功",position:"bottom",duration:3e3}),e.loadMore()):423===t.data.code&&Object(n.Toast)({message:"该就医人正在使用中",position:"bottom",duration:3e3})})})},update:function(t){var e={title:"修改就医人信息",updateInfo:{uuid:t.uuid,user:t.user,name:t.name,sex:t.sex,age:t.age,phone:t.phone,certificatesType:t.certificatesType,certificatesNo:t.certificatesNo,address:t.address}};sessionStorage.setItem("upDatePatient",a()(e)),this.$router.push("/addpatient")},goOrderConfirm:function(t){"orderConfirm"===this.$route.query.from&&(this.common.setStorage("patientInfo",t),this.$router.push("/orderconfirm"))},loadMore:function(){this.loading=!0,this.pageNo++,1===this.pageNo?this.getPatientList():this.pageNo>1&&this.totalPages>=this.pageNo&&this.getPatientList()}},mounted:function(){this.loadMore()},created:function(){"orderConfirm"!==this.$route.query.from&&this.common.removeStorage("patientInfo")}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"hospitalized"},[i("Header",{attrs:{headerCon:t.headerCon}}),t._v(" "),i("div",{staticClass:"list"},[i("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},t._l(t.hospitalizedList,function(e,s){return i("li",{key:s},[i("div",{staticClass:"info",on:{click:function(s){t.goOrderConfirm(e)}}},[i("p",[i("span",[t._v(t._s(e.name))]),t._v(" "),i("span",[t._v(t._s(e.sex))]),t._v(" "),i("span",[t._v(t._s(e.age))])]),t._v(" "),i("p",[i("span",[t._v(t._s(e.phone))]),t._v(" "),i("span",[t._v(t._s(e.certificatesType))]),t._v(" "),i("span",[t._v(t._s(e.certificatesNo))])])]),t._v(" "),i("div",{staticClass:"setting"},[e.settingDefault?i("img",{staticClass:"select",attrs:{src:t.selectImg}}):t._e(),t._v(" "),e.settingDefault?t._e():i("img",{staticClass:"select",attrs:{src:t.notSelectImg},on:{click:function(s){t.setDefault(e)}}}),t._v(" "),i("img",{staticClass:"del_img",attrs:{src:t.delImg},on:{click:function(s){t.del(e.uuid)}}}),t._v(" "),i("img",{staticClass:"edit_img",attrs:{src:t.editImg},on:{click:function(s){t.update(e)}}})])])}),0)]),t._v(" "),i("button",{staticClass:"add_person",on:{click:t.addPatient}},[t._v("添加就医人")]),t._v(" "),t.isShowEmpty?i("div",{staticClass:"empty"},[i("img",{attrs:{src:s("N8JA"),alt:""}}),t._v(" "),i("p",[t._v("您还没有就医人哦~")])]):t._e()],1)},staticRenderFns:[]};var d=s("VU/8")(r,c,!1,function(t){s("mr7M")},"data-v-534fdca6",null);e.default=d.exports},AlFE:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAMAAAAocOYLAAAAeFBMVEUAAACqqqqmpqaqqqqqqqqpqampqamqqqqqqqqpqamqqqqqqqqsrKyqqqqmpqaqqqqqqqqqqqqpqampqampqamqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpqamrq6usrKyqqqqqqqqqqqqqqqqqqqqqqqqqqqq0EWKWAAAAJ3RSTlMA3wY399Y7qs8P014KbhPzwLdpVSy7h3ZJIMWw7KOUfTTmnIxjQhUwSUWdAAAA9ElEQVQoz5XTOZaDMBBF0UJmFNCALWNmPP/977AlQR8aCgd+iYL7FRZRVEpnnayJ6GdUZEo8sCqit0TmGy/hVdfDKqV/S/fp2IGEok2GMVBtB44rdtjNcbED45xxosAMuhtzzaFmEi3S1O2tc9aJAGgF88iw7WJ4cc6FIOtrjv+xH03OOTWscF+cM/kIJud8FrRyzotv+Wh468mamY9AOXMuiHsTFnj8Mfc3yqTBY2buMXzSgxZ5QnsedPpR3cTcRda/BgcoLHOvALjntJ6B+60/RQswt33tB+0h1Ed/YqBxvh/eNc7wokTic3cy9xt6+zVHol/lDB+GDOVpqAAAAABJRU5ErkJggg=="},N8JA:function(t,e,s){t.exports=s.p+"static/img/jiuyirenempty.3ffeaf2.png"},"Ub/c":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAAZlBMVEUAAACqqqqqqqqqqqqqqqqpqamrq6uqqqqqqqqpqampqamoqKiqqqqrq6uZmZmpqamqqqqpqamnp6erq6urq6usrKyqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpqampqamqqqqI260dAAAAIXRSTlMAVzOs5N9S+WOnOAb3fwWVGysLpXAR7LeWi1xD19LIaMF/FG+JAAAAxElEQVQ4y+3UyQ6CMACE4ZFCqxaVsgq4zfu/pKEqUJYQDh5M/C4Tmp+QcCg68uCoMoxkNw74BkOCVA7yggGt+Mh0X0nu4YrIFI49KddFxmvUZOk5KjL1rBgnLrpBcNEVsdwsibDCJ45had0+du5M7BahtK/kQWaP1RmdHf1mjor2dPP+2YL+RBTy1Kxso+Af/U50no+SV4Sch2Zq0sxHptJ2ZY3pz7m+GiXMMaFwLpaUFNuRkhToxAEnhQY9UaE4dvVgPQHemiq+oGx8QgAAAABJRU5ErkJggg=="},mr7M:function(t,e){}});