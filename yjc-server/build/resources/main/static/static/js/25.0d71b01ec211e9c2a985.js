webpackJsonp([25],{"9K2Z":function(e,t){},"AkY+":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("VsUZ"),o=s("d2gY"),a={name:"Order",data:function(){return{staticUrl:o.config.static_url,tabData:["全部","待付款","待预约","进行中","待评价"],isSelect:parseInt(sessionStorage.getItem("orderListStatus"))||0,pageNo:0,deployable:!0,projectLength:1,noOrder:s("nuAs"),pageSize:10,totalPages:"",orderStatus:sessionStorage.getItem("orderListStatus")||"",state_payment:"fkq",successObject:{},isShowList:!1,loading:!0,isShowNoOrder:!1,noMoreData:!1,records:[{projectList:[{hospitalName:""}],order:{name:""},patient:{name:""},message:""}],hospitalList:this.common.getStorage("hospitalList")}},methods:{isShowSpan:function(e){if("折叠"!==this.records[e].message){for(var t=0;t<this.records[e].projectList.length;t++)this.records[e].projectList[t].isShow=!0;this.records[e].message="折叠"}else{for(var s=0;s<this.records[e].projectList.length;s++)s>=2&&(this.records[e].projectList[s].isShow=!1);this.records[e].message="查看剩余"+(this.records[e].projectList.length-2)+"个"}},changeTab:function(e){this.isSelect=e,this.pageNo=1,this.records=[],this.orderStatus=0===e?"":String(e),this.getOrderList()},goOrderDetail:function(e,t){sessionStorage.setItem("orderListStatus",t),"1"===t?this.$router.push({path:"/orderdetail",query:{uuid:e,status:t}}):this.$router.push({path:"/appointmentconfirm",query:{uuid:e,status:t}})},getOrderList:function(){var e=this;this.loading=!0;var t={pageSize:this.pageSize,pageNo:this.pageNo,orderStatus:this.orderStatus};r.a.getOrderList(t).then(function(t){if(200===t.data.code){var s=t.data.successObject,r=s.records;if(0===r.length&&0===e.records.length?(e.isShowNoOrder=!0,e.noMoreData=!1,console.log("没有数据")):0===r.length&&0!==e.records.length?(e.isShowNoOrder=!1,e.isShowNoOrder=!0):(e.isShowNoOrder=!1,e.isShowNoOrder=!1),r.forEach(function(e,t){e.message="查看剩余"+(e.projectList.length-2)+"个","1"===e.order.orderStatus?(e.order.payStatus="待付款",e.order.payName="去付款",e.order.isShowOrderBot=!0):"2"===e.order.orderStatus?(e.order.payStatus="待预约",e.order.payName="去预约",e.order.isShowOrderBot=!0):"3"===e.order.orderStatus?(e.order.payStatus="进行中",e.order.payName="",e.order.isShowOrderBot=!1):"4"===e.order.orderStatus&&(e.order.payStatus="待评价",e.order.payName="",e.order.isShowOrderBot=!1)}),1===e.pageNo?(e.records=[],e.records=r):e.records=e.records.concat(r),e.totalPages=s.pages,e.isShowList=!0,e.loading=!1,r.length)for(var o=0;o<e.records.length;o++)for(var a=0;a<e.records[o].projectList.length;a++){e.records[o].projectList[a].isShow=!(a>=2);for(var i=0;i<e.hospitalList.length;i++)parseInt(e.records[o].projectList[a].hospital)===parseInt(e.hospitalList[i].uuid)&&(e.records[o].projectList[a].hospitalName=e.hospitalList[i].name)}}})},goDetail:function(e,t){sessionStorage.setItem("orderListStatus",t),"1"===t?this.getOrderDetail(e):this.$router.push({path:"/appointmentconfirm",query:{uuid:e,status:t}})},getOrderDetail:function(e){var t=this,s={uuid:e};r.a.getOrderDetail(s).then(function(e){if(200===e.data.code){var s=e.data.successObject.projectList;for(var r in s)for(var o in t.hospitalList)if(s[r].hospital===t.hospitalList[o].uuid){s[r].hospitalName=t.hospitalList[o].name,s[r].hospitalLogo=t.hospitalList[o].logo;break}var a={userRemark:e.data.successObject.order.userRemark,scope:e.data.successObject.order.scope,reportNeed:e.data.successObject.order.paperReport,notes:e.data.successObject.order.notes,serviceCharge:e.data.successObject.order.servicePrice,couponPrice:e.data.successObject.order.couponPrice,price:e.data.successObject.order.price,uuid:e.data.successObject.order.uuid,coupon:e.data.successObject.order.coupon},i={totalPrice:e.data.successObject.order.projectPrice,orderConfirmList:e.data.successObject.projectList,projectNumber:e.data.successObject.order.projectCount,patientInfo:e.data.successObject.patient,orderInfo:a};t.common.setStorage("orderConfirmInfo",i),t.$router.push({path:"/orderconfirm"})}}).catch(function(e){console.log(e)})},loadMore:function(){this.loading=!0,this.pageNo++,1===this.pageNo?this.getOrderList():this.pageNo>1&&this.totalPages>=this.pageNo&&this.getOrderList()}},mounted:function(){this.loadMore()}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"order"},[s("div",{staticClass:"tab"},e._l(e.tabData,function(t,r){return s("p",{key:r,class:e.isSelect===r?"active":"",on:{click:function(t){e.changeTab(r)}}},[e._v(e._s(t))])}),0),e._v(" "),s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"info_list",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},e._l(e.records,function(t,r){return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowList,expression:"isShowList"}],key:r,staticClass:"order_num_list"},[s("div",{staticClass:"order_num_container"},[s("div",{staticClass:"info_header"},[s("span",{staticClass:"order_num"},[e._v("订单号："+e._s(t.order.orderNo))]),e._v(" "),s("span",{class:e.state_payment},[e._v(e._s(t.order.payStatus))])]),e._v(" "),s("ul",{on:{click:function(s){e.goOrderDetail(t.order.uuid,t.order.orderStatus)}}},e._l(t.projectList,function(t,r){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"itemInner.isShow"}],key:r},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.staticUrl+t.image,expression:"staticUrl + itemInner.image"}],attrs:{alt:""}}),e._v(" "),s("div",{staticClass:"check"},[s("p",{staticClass:"check_name"},[e._v(e._s(t.name))]),e._v(" "),s("p",{staticClass:"check_hospital"},[e._v(e._s(t.hospitalName))])]),e._v(" "),s("div",{staticClass:"cycle_cost"},[s("p",{staticClass:"cycle"},[e._v("周期："),s("span",[e._v(e._s(t.period))])]),e._v(" "),s("p",{staticClass:"cost"},[e._v("¥"+e._s(t.nowPrice))])])])}),0),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.projectList.length>2,expression:"itemRecords.projectList.length > 2"}],staticClass:"isShowSpan",on:{click:function(t){e.isShowSpan(r)}}},[e._v(e._s(t.message))]),e._v(" "),s("div",{staticClass:"order_num_info"},[s("p",{staticClass:"jyr"},[e._v("就医人："+e._s(t.patient.name))]),e._v(" "),s("p",{staticClass:"total"},[e._v("共计"+e._s(t.projectList.length)+"件商品，总金额 "),s("span",[e._v("¥"+e._s(t.order.price))])])])]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.order.isShowOrderBot,expression:"itemRecords.order.isShowOrderBot"}],staticClass:"del_again_pay"},[s("button",{class:["2"===t.order.orderStatus?"blue":"","pay_state"],on:{click:function(s){e.goDetail(t.order.uuid,t.order.orderStatus)}}},[e._v(e._s(t.order.payName))])])])}),0),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowNoOrder,expression:"isShowNoOrder"}],staticClass:"no_con_tips"},[s("img",{attrs:{src:e.noOrder,alt:""}}),e._v(" "),s("p",[e._v("你还没有此类型订单哦~")])]),e._v(" "),e.noMoreData?s("p",{staticClass:"noMore"},[e._v("没有更多数据了~")]):e._e()])},staticRenderFns:[]};var c=s("VU/8")(a,i,!1,function(e){s("9K2Z")},"data-v-1795a679",null);t.default=c.exports},nuAs:function(e,t,s){e.exports=s.p+"static/img/no_order.aa6383a.png"}});